<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

		<meta
			name="viewport"
			content="initial-scale=1, maximum-scale=1,user-scalable=no"
		/>

		<title>Query State Info without Map</title>

		<script src="https://js.arcgis.com/3.31/"></script>
		<script>
			require([
				"dojo/dom",
				"dojo/on",
				"esri/tasks/query",
				"esri/tasks/QueryTask",
				"dojo/domReady!"
			], function(dom, on, Query, QueryTask) {
				var queryTask = new QueryTask(
					"https://arcgis.sefnco.com/arcgis/rest/services/Permits_joined/FeatureServer/13"
				);

				var query = new Query();
				query.returnGeometry = false;
				query.outFields = ["Permit_FQNID", "Permit_Name"];

				on(dom.byId("execute"), "click", execute);

				function execute() {
					query.text = dom.byId("Permit_Status").value;
					queryTask.execute(query, showResults);
				}

				function showResults(results) {
					var resultItems = [];
					var resultCount = results.features.length;
					for (var i = 0; i < resultCount; i++) {
						var featureAttributes = results.features[i].attributes;
						for (var attr in featureAttributes) {
							resultItems.push(
								"<b>" + attr + ":</b>  " + featureAttributes[attr] + "<br>"
							);
						}
						resultItems.push("<br>");
					}
					dom.byId("info").innerHTML = resultItems.join("");
				}
			});
		</script>
	</head>

	<body>
		US state name :
		<input type="text" id="Permit_Status" value="Permit Received" />
		<input id="execute" type="button" value="Search" />
		<br />
		<br />
		<div
			id="info"
			style="padding:5px; margin:5px; background-color:#eee;"
		></div>
	</body>
</html>
